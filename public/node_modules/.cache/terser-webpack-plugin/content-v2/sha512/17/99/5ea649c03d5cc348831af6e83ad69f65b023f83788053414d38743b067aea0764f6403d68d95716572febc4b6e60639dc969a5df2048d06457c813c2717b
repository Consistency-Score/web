{"map":{"version":3,"sources":["static/js/pages-ExploreFeed-hooks-useExploreFeedData.b00deed3.chunk.js"],"names":["window","push","/0NN","module","__webpack_exports__","__webpack_require__","_apollo_client__WEBPACK_IMPORTED_MODULE_0__","_CommentFragment__WEBPACK_IMPORTED_MODULE_1__","_t","fragment","Object","t","dependencies","2uJA","9rvO","uC8u","r","objectSpread2","compact","client","UserDonationFragment","UserPhotoFragment","UserFollowersCountFragment","core","CategoryUserFragment","InsightFragment","LatestInsightCommentsFragment","Configuration","react","UserTopicFragment","FeedbackFeedFragment","LatestFeedbackCommentsFragment","TagFeedFragment","Feed_t","QUERY","result","options","_data$feed","_data$feed$pageInfo","_data$feed2","_data$feed2$pageInfo","explore","topicDisplayLength","userDisplayLength","feed","pageSize","hookResult","variables","topicsFirst","usersFirst","first","firstTopUsers","context","noBatch","fetchMore","data","endCursor","pageInfo","hasNextPage","0","fetchMoreErrored","1","setFetchMoreErrored","loadMore","fetchMoreAsync","async","fetchMoreResult","after","updateQuery","previousResult","prevNodeIds","nodes","map","node","id","newNodes","filter","includes","length","useQueryFeed","notifyOnNetworkStatusChange","errorPolicy","items","_result$data","feedItems","feedItem","__typename","_feedItem$topUsers$no","topUsers","type","tag","_feedItem$topics$node","topics","category","_feedItem$users$nodes","users","insight","feedback","preprocessItems","dataLoaded","vffC","TagFragment","SuggestedUserInFeedTagFragment","TagFeedFragment_t","xcYx","FeedbackKeywordFragment","UserDetailsFragment","FeedbackFeedFragment_t"],"mappings":"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"},"code":"(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[90],{\"/0NN\":function(e,t,a){\"use strict\";var n=a(\"VX74\"),r=a(\"Sl16\");let s;t.a={fragment:Object(n.gql)(s||(s=(e=>e)`\n    fragment LatestFeedbackCommentsFragment on Feedback {\n      comments(first: 1, sortOrder: DESC) {\n        nodes {\n          ...CommentFragment\n        }\n        pageInfo {\n          totalCount\n        }\n      }\n    }\n  `)),dependencies:[r.a]}},\"2uJA\":function(e,t,a){\"use strict\";var n=a(\"VX74\"),r=a(\"Sl16\");let s;t.a={fragment:Object(n.gql)(s||(s=(e=>e)`\n    fragment LatestInsightCommentsFragment on Insight {\n      comments(first: 1, sortOrder: DESC) {\n        nodes {\n          ...CommentFragment\n        }\n        pageInfo {\n          totalCount\n        }\n      }\n    }\n  `)),dependencies:[r.a]}},\"9rvO\":function(e,t,a){\"use strict\";var n=a(\"VX74\");let r;t.a={fragment:Object(n.gql)(r||(r=(e=>e)`\n    fragment TagFragment on Tag {\n      icon\n      id\n      slug\n      title\n    }\n  `)),dependencies:[]}},uC8u:function(e,t,a){\"use strict\";a.r(t);var n=a(\"VTBJ\"),r=(a(\"3bBZ\"),a(\"bPB8\")),s=a(\"VX74\"),o=a(\"UQP/\"),d=a(\"WycG\"),i=a(\"iUCG\"),g=a(\"UzkQ\");let c;var f=Object(g.l)(Object(s.gql)(c||(c=(e=>e)`\n    fragment CategoryUserFragment on User {\n      id\n      username\n      headline\n      name\n      payoutsEnabled\n      donation {\n        ...UserDonationFragment\n      }\n      photo {\n        ...UserPhotoFragment\n      }\n      followers {\n        ...UserFollowersCountFragment\n      }\n    }\n  `)),[o.a,d.a,i.a]),l=a(\"ketc\"),u=a(\"2uJA\"),m=a(\"hjAd\"),p=a(\"q1tI\"),b=a(\"1CGQ\"),F=a(\"xcYx\"),h=a(\"/0NN\"),v=a(\"vffC\");let O;const C=Object(s.gql)(O||(O=(e=>e)`\n  query Feed(\n    $first: Int\n    $after: String\n    $topicsFirst: Int\n    $usersFirst: Int\n    $topUsersAfter: String\n    $firstTopUsers: Int\n  ) {\n    feed(first: $first, after: $after) {\n      nodes {\n        ... on Category {\n          id\n          title\n          type\n          emptyStateTitle\n\n          ... on CategoryTopics {\n            topics(after: null, first: $topicsFirst) {\n              nodes {\n                ...UserTopicFragment\n                user {\n                  headline\n                  name\n                  photo {\n                    ...UserPhotoFragment\n                  }\n                  username\n                }\n              }\n              pageInfo {\n                hasNextPage\n                endCursor\n              }\n            }\n          }\n\n          ... on CategoryUsers {\n            users(after: null, first: $usersFirst) {\n              nodes {\n                ...CategoryUserFragment\n              }\n              pageInfo {\n                hasNextPage\n                endCursor\n              }\n            }\n          }\n        }\n\n        ... on Feedback {\n          id\n        }\n\n        ... on Tag {\n          id\n        }\n\n        ...TagFeedFragment\n        ...FeedbackFeedFragment\n        ...InsightFragment\n        ...LatestInsightCommentsFragment\n        ...LatestFeedbackCommentsFragment\n      }\n      pageInfo {\n        hasNextPage\n        endCursor\n      }\n    }\n  }\n\n  ${0}\n`),Object(g.s)([v.a,b.a,d.a,f,l.a,u.a,F.a,h.a]));t.default=()=>{const e=(e=>{var t,a,o,d;const{explore:{topicDisplayLength:i,userDisplayLength:g},feed:{pageSize:c}}=Object(m.c)(),f=Object(s.useQuery)(C,Object(n.a)(Object(n.a)({},e),{},{variables:Object(n.a)({topicsFirst:i,usersFirst:g,first:c,firstTopUsers:3},null===e||void 0===e?void 0:e.variables),context:Object(n.a)({noBatch:!0},null===e||void 0===e?void 0:e.context)})),{fetchMore:l,data:u}=f,b=null===u||void 0===u||null===(t=u.feed)||void 0===t||null===(a=t.pageInfo)||void 0===a?void 0:a.endCursor,F=(null===u||void 0===u||null===(o=u.feed)||void 0===o||null===(d=o.pageInfo)||void 0===d?void 0:d.hasNextPage)||!1,{0:h,1:v}=Object(p.useState)(!1),O=Object(p.useCallback)(()=>{if(!F)return;const e=async t=>{try{v(!1);const a=await l({variables:{after:t},updateQuery:(e,{fetchMoreResult:t})=>{if(null===t||void 0===t||!t.feed||null===e||void 0===e||!e.feed)return e;const a=Object(r.a)(null===e||void 0===e?void 0:e.feed.nodes).map(e=>e.id),s=Object(r.a)(t.feed.nodes).filter(e=>!e||!a.includes(e.id));return{feed:Object(n.a)(Object(n.a)({},e.feed),{},{nodes:[...e.feed.nodes||[],...s],pageInfo:t.feed.pageInfo})}}});!Object(r.a)(a.data.feed.nodes).length&&a.data.feed.pageInfo.hasNextPage&&await e(a.data.feed.pageInfo.endCursor)}catch{v(!0)}};e(b)},[l,b,F]);return Object(p.useEffect)(()=>{!Object(r.a)(null===u||void 0===u?void 0:u.feed.nodes).length&&null!==u&&void 0!==u&&u.feed.pageInfo.hasNextPage&&O()},[u,O]),Object(n.a)(Object(n.a)({},f),{},{fetchMoreErrored:h,fetchMore:O})})({notifyOnNetworkStatusChange:!0,errorPolicy:\"all\"}),t=Object(p.useMemo)(()=>{var t;return(e=>{const t=[];for(const s of e)switch(s.__typename){case\"Tag\":var a;if(null===(a=s.topUsers.nodes)||void 0===a||!a.length)continue;t.push({type:\"tag\",tag:s});break;case\"CategoryTopics\":var n;if(null===(n=s.topics.nodes)||void 0===n||!n.length)continue;t.push({type:\"Category\",category:s});break;case\"CategoryUsers\":var r;if(null===(r=s.users.nodes)||void 0===r||!r.length)continue;t.push({type:\"Category\",category:s});break;case\"GenericInsight\":case\"LinkInsight\":case\"SharedInsight\":t.push({type:\"Insight\",insight:s});break;case\"Feedback\":t.push({type:\"Feedback\",feedback:s})}return t})(Object(r.a)(null===(t=e.data)||void 0===t?void 0:t.feed.nodes))},[e.data]);return Object(n.a)(Object(n.a)({},e),{},{items:t,dataLoaded:!!e.data})}},vffC:function(e,t,a){\"use strict\";var n=a(\"VX74\"),r=a(\"9rvO\"),s=a(\"iUCG\"),o=a(\"WycG\");let d;var i={fragment:Object(n.gql)(d||(d=(e=>e)`\n    fragment SuggestedUserInFeedTagFragment on User {\n      id\n      name\n      headline\n      feedbacksTakenAverage\n      username\n      tags(first: 2) {\n        nodes {\n          ...TagFragment\n        }\n      }\n      photo {\n        ...UserPhotoFragment\n      }\n      followers {\n        ...UserFollowersCountFragment\n      }\n      feedbacksTaken {\n        pageInfo {\n          totalCount\n        }\n      }\n    }\n  `)),dependencies:[o.a,s.a,r.a]};let g;t.a={fragment:Object(n.gql)(g||(g=(e=>e)`\n    fragment TagFeedFragment on Tag {\n      ...TagFragment\n      icon\n      topUsers(first: $firstTopUsers, after: $topUsersAfter) {\n        nodes {\n          ...SuggestedUserInFeedTagFragment\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  `)),dependencies:[i,r.a]}},xcYx:function(e,t,a){\"use strict\";var n=a(\"VX74\");let r;var s={fragment:Object(n.gql)(r||(r=(e=>e)`\n    fragment FeedbackKeywordFragment on FeedbackKeyword {\n      id\n      text\n    }\n  `)),dependencies:[]},o=a(\"8lIe\");let d;t.a={fragment:Object(n.gql)(d||(d=(e=>e)`\n    fragment FeedbackFeedFragment on Feedback {\n      id\n      rating\n      keywords {\n        ...FeedbackKeywordFragment\n      }\n      text\n      giver {\n        ...UserDetailsFragment\n      }\n      createdAt\n      taker {\n        ...UserDetailsFragment\n      }\n      commentInfo: comments {\n        pageInfo {\n          totalCount\n        }\n      }\n    }\n  `)),dependencies:[o.a,s]}}}]);","extractedComments":[]}